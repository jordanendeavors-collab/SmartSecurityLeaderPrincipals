<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003366">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQUFBU1NVIEluY2x1c2l2ZSBMZWFkZXJzaGlwIiwic2hvcnRfbmFtZSI6IkFBQVNTVSBJTCIsInN0YXJ0X3VybCI6Ii4iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjMDAzMzY2IiwidGhlbWVfY29sb3IiOiIjMDAzMzY2In0=">
    <title>AAASSU Inclusive Leadership Portal | Members First | G$D | True North</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Sans+Pro:wght@400;600;700&display=swap');
        :root{--aaa-blue:#003366;--aaa-blue-light:#0066CC;--aaa-blue-dark:#002244;--aaa-red:#CC0000;--gold:#FFD700;--gold-dark:#B8860B;--green:#228B22;--green-light:#32CD32;--surface:#f0f4f8;--card:#ffffff;--text:#1a1a2e;--text-muted:#64748b;--border:#cbd5e1;--shadow:0 4px 20px rgba(0,51,102,0.15);--radius:12px;--radius-sm:8px;--low-red:#fee2e2;--avg-yellow:#fef3c7;--high-green:#dcfce7}
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'Source Sans Pro',-apple-system,sans-serif;background:linear-gradient(135deg,var(--aaa-blue-dark),var(--aaa-blue));min-height:100vh;color:var(--text);line-height:1.6}
        .login-container{min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;position:relative;overflow:hidden}
        .login-container::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,215,0,0.1) 0%,transparent 50%);animation:pulse 15s ease-in-out infinite}
        @keyframes pulse{0%,100%{transform:scale(1);opacity:0.5}50%{transform:scale(1.1);opacity:0.8}}
        .login-box{background:var(--card);padding:50px 40px;border-radius:20px;box-shadow:var(--shadow);max-width:480px;width:100%;position:relative;z-index:10;text-align:center;border-top:5px solid var(--gold)}
        .login-logo{font-size:70px;margin-bottom:15px;animation:bounce 2s ease infinite}
        @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        .login-title{font-family:'Bebas Neue',sans-serif;font-size:1.8em;color:var(--aaa-blue);letter-spacing:2px;margin-bottom:5px}
        .login-subtitle{font-size:0.95em;color:var(--text-muted);margin-bottom:10px}
        .login-tagline{background:linear-gradient(135deg,var(--aaa-blue),var(--aaa-blue-light));color:var(--gold);padding:10px 20px;border-radius:25px;font-weight:700;letter-spacing:2px;font-size:0.85em;margin-bottom:25px;display:inline-block}
        .login-field{margin-bottom:18px;text-align:left}
        .login-field label{display:block;color:var(--aaa-blue);font-weight:700;margin-bottom:6px;font-size:0.9em}
        .login-field input,.login-field select{width:100%;padding:12px;border:2px solid var(--border);border-radius:var(--radius);font-size:1em;background:var(--surface)}
        .login-field input:focus,.login-field select:focus{outline:none;border-color:var(--aaa-blue);background:var(--card)}
        .login-btn{width:100%;padding:14px;background:linear-gradient(135deg,var(--aaa-blue),var(--aaa-blue-light));color:white;border:none;border-radius:var(--radius);font-size:1.1em;font-weight:700;cursor:pointer;text-transform:uppercase;letter-spacing:2px;margin-top:10px}
        .login-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
        .login-source{margin-top:20px;padding:12px;background:var(--surface);border-radius:var(--radius);font-size:0.8em;color:var(--text-muted);border-left:4px solid var(--gold)}
        .app-container{display:none;min-height:100vh;background:var(--surface)}
        .app-header{background:linear-gradient(135deg,var(--aaa-blue),var(--aaa-blue-light));color:white;padding:15px 20px;position:sticky;top:0;z-index:1000;box-shadow:var(--shadow)}
        .header-top{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
        .header-brand{display:flex;align-items:center;gap:12px}
        .header-brand span{font-size:1.8em}
        .header-title{font-family:'Bebas Neue',sans-serif;font-size:1.3em;letter-spacing:2px}
        .header-tagline{background:rgba(255,215,0,0.2);color:var(--gold);padding:5px 12px;border-radius:15px;font-size:0.75em;font-weight:700;letter-spacing:1px}
        .header-user{display:flex;align-items:center;gap:10px}
        .user-info{text-align:right;font-size:0.85em}
        .user-name{font-weight:700}
        .logout-btn{background:var(--gold);color:var(--aaa-blue);border:none;padding:8px 15px;border-radius:var(--radius-sm);font-weight:700;cursor:pointer;font-size:0.8em}
        .nav-tabs{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
        .nav-tab{background:rgba(255,255,255,0.1);color:white;border:none;padding:8px 14px;border-radius:var(--radius-sm);cursor:pointer;font-weight:600;font-size:0.85em;transition:all 0.2s}
        .nav-tab:hover,.nav-tab.active{background:var(--gold);color:var(--aaa-blue)}
        .app-content{padding:20px;max-width:1400px;margin:0 auto}
        .section{display:none}
        .section.active{display:block}
        .section-title{font-family:'Bebas Neue',sans-serif;font-size:1.6em;color:var(--aaa-blue);margin-bottom:15px;letter-spacing:1px;display:flex;align-items:center;gap:10px}
        .card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);margin-bottom:15px;border-left:4px solid var(--aaa-blue)}
        .card-title{font-weight:700;color:var(--aaa-blue);margin-bottom:10px;font-size:1.1em}
        .grid-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}
        .grid-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:15px}
        .behavior-card{background:var(--card);border-radius:var(--radius);padding:15px;box-shadow:var(--shadow);cursor:pointer;transition:transform 0.2s,box-shadow 0.2s;border-left:4px solid var(--aaa-blue)}
        .behavior-card:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(0,51,102,0.2)}
        .behavior-number{background:var(--aaa-blue);color:white;width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;margin-bottom:10px}
        .behavior-title{font-weight:700;color:var(--aaa-blue);font-size:0.95em;margin-bottom:8px}
        .level-indicators{display:flex;gap:6px}
        .level-dot{width:12px;height:12px;border-radius:50%}
        .level-dot.red{background:var(--aaa-red)}
        .level-dot.yellow{background:var(--gold)}
        .level-dot.green{background:var(--green)}
        .level-badge{padding:4px 10px;border-radius:12px;font-size:0.75em;font-weight:700}
        .level-low{background:var(--low-red);color:var(--aaa-red)}
        .level-avg{background:var(--avg-yellow);color:var(--gold-dark)}
        .level-high{background:var(--high-green);color:var(--green)}
        .week-card{background:var(--card);border-radius:var(--radius);padding:15px;box-shadow:var(--shadow);border-left:4px solid var(--aaa-blue)}
        .week-card.foundation{border-left-color:var(--aaa-blue)}
        .week-card.development{border-left-color:var(--gold)}
        .week-card.integration{border-left-color:var(--green)}
        .week-number{font-weight:700;color:var(--aaa-blue);font-size:0.9em;margin-bottom:5px}
        .week-focus{font-weight:700;font-size:1em;margin-bottom:10px}
        .week-item{padding:8px 10px;background:var(--surface);border-radius:var(--radius-sm);margin-bottom:6px;font-size:0.85em}
        .week-item strong{color:var(--aaa-blue)}
        .assessment-table{width:100%;border-collapse:collapse;font-size:0.9em}
        .assessment-table th,.assessment-table td{padding:12px;border:1px solid var(--border);text-align:left}
        .assessment-table th{background:var(--aaa-blue);color:white;font-weight:700}
        .assessment-table tr:nth-child(even){background:var(--surface)}
        .score-input{width:60px;padding:8px;border:2px solid var(--border);border-radius:var(--radius-sm);text-align:center;font-weight:700}
        .total-row{background:var(--gold) !important;font-weight:700}
        .calendar-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}
        .calendar-month{background:var(--card);border-radius:var(--radius);padding:15px;box-shadow:var(--shadow);border-top:4px solid var(--aaa-blue)}
        .calendar-month-header{font-weight:700;color:var(--aaa-blue);font-size:1em;margin-bottom:5px}
        .calendar-month-theme{font-size:0.85em;color:var(--text-muted);margin-bottom:8px;font-style:italic}
        .calendar-month-focus{font-size:0.8em;background:var(--surface);padding:8px;border-radius:var(--radius-sm)}
        .question-card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);margin-bottom:15px}
        .question-text{font-weight:600;margin-bottom:15px;font-size:1.05em}
        .question-options{display:flex;flex-direction:column;gap:10px}
        .question-option{padding:12px 15px;background:var(--surface);border-radius:var(--radius-sm);cursor:pointer;border:2px solid transparent;transition:all 0.2s}
        .question-option:hover{border-color:var(--aaa-blue)}
        .question-option.selected{border-color:var(--aaa-blue);background:rgba(0,51,102,0.1)}
        .question-option.correct{border-color:var(--green);background:var(--high-green)}
        .question-option.incorrect{border-color:var(--aaa-red);background:var(--low-red)}
        .quiz-result{padding:20px;background:var(--high-green);border-radius:var(--radius);text-align:center;font-weight:700;font-size:1.2em;color:var(--green)}
        .modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center;z-index:2000;padding:20px}
        .modal-overlay.active{display:flex}
        .modal-content{background:var(--card);border-radius:var(--radius);padding:25px;max-width:700px;width:100%;max-height:90vh;overflow-y:auto;position:relative}
        .modal-close{position:absolute;top:15px;right:15px;background:none;border:none;font-size:1.5em;cursor:pointer;color:var(--text-muted)}
        .btn{padding:10px 20px;border:none;border-radius:var(--radius-sm);font-weight:700;cursor:pointer;font-size:0.9em;transition:all 0.2s}
        .btn-primary{background:var(--aaa-blue);color:white}
        .btn-primary:hover{background:var(--aaa-blue-light)}
        .btn-gold{background:var(--gold);color:var(--aaa-blue)}
        .btn-gold:hover{background:var(--gold-dark)}
        .tab-btns{display:flex;gap:8px;margin-bottom:15px;flex-wrap:wrap}
        .tab-btn{padding:8px 16px;background:var(--surface);border:2px solid var(--border);border-radius:var(--radius-sm);cursor:pointer;font-weight:600;font-size:0.85em}
        .tab-btn.active{background:var(--aaa-blue);color:white;border-color:var(--aaa-blue)}
        .concept-card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);margin-bottom:15px}
        .concept-title{font-weight:700;color:var(--aaa-blue);font-size:1.2em;margin-bottom:10px}
        .concept-def{font-style:italic;margin-bottom:15px;padding:10px;background:var(--surface);border-radius:var(--radius-sm)}
        .offline-indicator{position:fixed;bottom:20px;right:20px;background:var(--aaa-red);color:white;padding:10px 20px;border-radius:var(--radius);font-weight:700;display:none;z-index:3000}
        .offline-indicator.show{display:block}
        .progress-bar{height:8px;background:var(--border);border-radius:4px;overflow:hidden;margin-bottom:10px}
        .progress-fill{height:100%;background:linear-gradient(90deg,var(--aaa-blue),var(--green));transition:width 0.3s}
        @media(max-width:768px){.login-box{padding:30px 20px}.header-title{font-size:1.1em}.nav-tabs{gap:5px}.nav-tab{padding:6px 10px;font-size:0.8em}.app-content{padding:15px}.grid-2,.grid-3{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <div class="login-logo">üõ°Ô∏è</div>
            <h1 class="login-title">AAASSU Inclusive Leadership</h1>
            <p class="login-subtitle">Research-Based Implementation Portal</p>
            <div class="login-tagline">Members First | G$D | True North</div>
            <form onsubmit="return handleLogin(event)">
                <div class="login-field">
                    <label>Your Name</label>
                    <input type="text" id="loginName" placeholder="Enter your name" required>
                </div>
                <div class="login-field">
                    <label>Your Role</label>
                    <select id="loginRole" required>
                        <option value="">Select your role...</option>
                        <option value="vp">VP / National Director</option>
                        <option value="director">Director Operations</option>
                        <option value="manager">Manager / Team Lead</option>
                        <option value="training">Training Director</option>
                        <option value="coord_mgr">Coordinator Manager</option>
                        <option value="member_coord">Member Coordinator</option>
                        <option value="pro_coord">Pro Coordinator</option>
                        <option value="technician">Technician / Pro</option>
                    </select>
                </div>
                <div class="login-field">
                    <label>Territory</label>
                    <select id="loginTerritory" required>
                        <option value="">Select territory...</option>
                        <option value="arizona">Arizona</option>
                        <option value="california">California</option>
                        <option value="nevada">Nevada</option>
                        <option value="corporate">Corporate</option>
                    </select>
                </div>
                <button type="submit" class="login-btn">Enter Portal</button>
            </form>
            <div class="login-source">
                <strong>üìö Research Foundation:</strong> Based on "How Inclusive Is Your Leadership?" by Dr. Salwa Rahim-Dillard, Harvard Business Review (April 2021)
            </div>
        </div>
    </div>

    <div class="app-container" id="appContainer">
        <header class="app-header">
            <div class="header-top">
                <div class="header-brand">
                    <span>üõ°Ô∏è</span>
                    <div>
                        <div class="header-title">AAASSU INCLUSIVE LEADERSHIP</div>
                        <div class="header-tagline">Members First | G$D | True North</div>
                    </div>
                </div>
                <div class="header-user">
                    <div class="user-info">
                        <div class="user-name" id="displayUserName">User</div>
                        <div id="displayUserRole">Role</div>
                    </div>
                    <button class="logout-btn" onclick="handleLogout()">Logout</button>
                </div>
            </div>
            <div class="nav-tabs">
                <button class="nav-tab active" data-section="dashboard">üìä Dashboard</button>
                <button class="nav-tab" data-section="behaviors">üéØ 10 Behaviors</button>
                <button class="nav-tab" data-section="weekly">üìÖ 12-Week Plan</button>
                <button class="nav-tab" data-section="assessment">üìù Self-Assessment</button>
                <button class="nav-tab" data-section="concepts">üåâ Bridge & Bond</button>
                <button class="nav-tab" data-section="calendar">üìÜ Annual Calendar</button>
                <button class="nav-tab" data-section="quiz">‚ùì Knowledge Check</button>
                <button class="nav-tab" data-section="lifetime">üèÜ Lifetime Journey</button>
            </div>
        </header>

        <main class="app-content">
            <!-- DASHBOARD SECTION -->
            <section class="section active" id="dashboard">
                <h2 class="section-title">üìä Your Inclusive Leadership Dashboard</h2>
                <div class="grid-2">
                    <div class="card">
                        <div class="card-title">üìà Your Progress</div>
                        <div class="progress-bar"><div class="progress-fill" id="overallProgress" style="width:0%"></div></div>
                        <p id="progressText">Complete your self-assessment to see your progress</p>
                        <button class="btn btn-primary" onclick="showSection('assessment')" style="margin-top:10px">Take Assessment</button>
                    </div>
                    <div class="card">
                        <div class="card-title">üìÖ Current Week Focus</div>
                        <div id="currentWeekFocus">Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">üéØ The 10 HBR Inclusive Leadership Behaviors</div>
                    <p style="margin-bottom:15px;color:var(--text-muted)">Click any behavior to learn more about Low, Average, and High ability levels.</p>
                    <div class="grid-3" id="dashboardBehaviors"></div>
                </div>
                <div class="card">
                    <div class="card-title">üí° Key Concepts from HBR Research</div>
                    <div class="grid-3">
                        <div style="padding:15px;background:var(--surface);border-radius:var(--radius-sm);border-left:4px solid var(--aaa-blue)">
                            <strong style="color:var(--aaa-blue)">üåâ BRIDGING</strong>
                            <p style="font-size:0.9em;margin-top:5px">Connecting authentically with people DIFFERENT from you. Essential for white leaders.</p>
                        </div>
                        <div style="padding:15px;background:var(--surface);border-radius:var(--radius-sm);border-left:4px solid var(--gold)">
                            <strong style="color:var(--gold-dark)">ü§ù BONDING</strong>
                            <p style="font-size:0.9em;margin-top:5px">Connecting authentically with people SIMILAR to you in marginalized identity. Essential for BIPOC leaders.</p>
                        </div>
                        <div style="padding:15px;background:var(--surface);border-radius:var(--radius-sm);border-left:4px solid var(--aaa-red)">
                            <strong style="color:var(--aaa-red)">‚ö†Ô∏è MIRRORING</strong>
                            <p style="font-size:0.9em;margin-top:5px">When BIPOC modify behavior to match white managers. WARNING: Indicates non-inclusive environment.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 10 BEHAVIORS SECTION -->
            <section class="section" id="behaviors">
                <h2 class="section-title">üéØ The 10 HBR Inclusive Leadership Behaviors</h2>
                <p style="margin-bottom:20px;color:var(--text-muted)">Based on research by Dr. Salwa Rahim-Dillard involving 100+ mid and senior-level BIPOC employees across multiple industries.</p>
                <div class="grid-3" id="behaviorsGrid"></div>
            </section>

            <!-- 12-WEEK PLAN SECTION -->
            <section class="section" id="weekly">
                <h2 class="section-title">üìÖ Your 12-Week Implementation Plan</h2>
                <p style="margin-bottom:15px;color:var(--text-muted)">Each week focuses on a specific HBR behavior with daily practices, meeting agendas, and bridging actions.</p>
                <div class="tab-btns" id="roleTabs">
                    <button class="tab-btn active" data-role="vp">VP/Director</button>
                    <button class="tab-btn" data-role="director">Director</button>
                    <button class="tab-btn" data-role="manager">Manager</button>
                    <button class="tab-btn" data-role="coordinator">Coordinator</button>
                    <button class="tab-btn" data-role="technician">Technician</button>
                </div>
                <div id="roleContent"></div>
            </section>

            <!-- SELF-ASSESSMENT SECTION -->
            <section class="section" id="assessment">
                <h2 class="section-title">üìù Inclusive Leadership Self-Assessment</h2>
                <p style="margin-bottom:20px;color:var(--text-muted)">Rate yourself 1-5 on each behavior. Be honest - this is for your own development.</p>
                <div class="card">
                    <table class="assessment-table">
                        <thead>
                            <tr>
                                <th style="width:5%">#</th>
                                <th style="width:25%">Behavior</th>
                                <th style="width:22%">Low (1-2)</th>
                                <th style="width:22%">Average (3)</th>
                                <th style="width:22%">High (4-5)</th>
                                <th style="width:8%">Score</th>
                            </tr>
                        </thead>
                        <tbody id="assessmentBody"></tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td colspan="5" style="text-align:right;padding-right:20px;">TOTAL SCORE:</td>
                                <td id="totalScore">0</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="card">
                    <div class="card-title">üìä Scoring Guide (from HBR Research)</div>
                    <div class="grid-3">
                        <div style="padding:15px;background:var(--low-red);border-radius:var(--radius-sm)">
                            <strong style="color:var(--aaa-red)">10-20: LOW ABILITY</strong>
                            <p style="font-size:0.85em;margin-top:5px">Significant development needed; behaviors likely causing harm to BIPOC employees.</p>
                        </div>
                        <div style="padding:15px;background:var(--avg-yellow);border-radius:var(--radius-sm)">
                            <strong style="color:var(--gold-dark)">21-35: AVERAGE ABILITY</strong>
                            <p style="font-size:0.85em;margin-top:5px">Some positive impact but inconsistent; room for growth.</p>
                        </div>
                        <div style="padding:15px;background:var(--high-green);border-radius:var(--radius-sm)">
                            <strong style="color:var(--green)">36-50: HIGH ABILITY</strong>
                            <p style="font-size:0.85em;margin-top:5px">Positive impact; continue growing. DEI work is never-ending.</p>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="saveAssessment()" style="margin-top:15px">üíæ Save My Assessment</button>
            </section>

            <!-- BRIDGING & BONDING SECTION -->
            <section class="section" id="concepts">
                <h2 class="section-title">üåâ Bridging & Bonding: Key Concepts</h2>
                <div class="concept-card">
                    <div class="concept-title">üåâ BRIDGING</div>
                    <div class="concept-def">"Connecting authentically with people DIFFERENT from you"</div>
                    <p><strong>Who needs it:</strong> White leaders interacting across demographic differences</p>
                    <p><strong>Example behaviors:</strong> Learning about others' experiences; adapting communication styles; showing genuine curiosity; acknowledging differences without judgment</p>
                    <p><strong>Barriers:</strong> Discomfort with difference; assumptions; fear of saying wrong thing; lack of exposure</p>
                    <p><strong>Practice:</strong> Attend ERG events as participant; seek mentors across difference; ask questions with humility; listen to understand</p>
                </div>
                <div class="concept-card" style="border-left:4px solid var(--gold)">
                    <div class="concept-title" style="color:var(--gold-dark)">ü§ù BONDING</div>
                    <div class="concept-def">"Connecting authentically with people SIMILAR to you in marginalized identity"</div>
                    <p><strong>Who needs it:</strong> BIPOC leaders connecting with other BIPOC employees</p>
                    <p><strong>Example behaviors:</strong> Creating safe spaces; sharing experiences; advocating for others like you; mentoring</p>
                    <p><strong>Barriers:</strong> Pressure to assimilate; fear of being 'too' identified with group; competitive dynamics</p>
                    <p><strong>Practice:</strong> Mentor BIPOC employees; participate in ERGs authentically; use position to open doors</p>
                </div>
                <div class="concept-card" style="border-left:4px solid var(--aaa-red)">
                    <div class="concept-title" style="color:var(--aaa-red)">‚ö†Ô∏è MIRRORING (Warning Sign)</div>
                    <div class="concept-def">"Workplace impression-management where BIPOC modify behavior to match white managers"</div>
                    <p><strong>What it means:</strong> When BIPOC employees change appearance, speech, values to gain acceptance - this indicates a NON-inclusive environment</p>
                    <p><strong>Research finding:</strong> Mirroring challenges the fundamental value of BIPOC employees to be authentic and real</p>
                    <p><strong>Your role:</strong> Create environments where mirroring is NOT necessary for success</p>
                    <p><strong>Key stat:</strong> 89% of white leaders in the study severely lacked ability to bridge authentically</p>
                </div>
            </section>

            <!-- ANNUAL CALENDAR SECTION -->
            <section class="section" id="calendar">
                <h2 class="section-title">üìÜ 2026 Annual Inclusion Calendar</h2>
                <p style="margin-bottom:20px;color:var(--text-muted)">Each month has a theme aligned with cultural heritage months and the 10 HBR behaviors.</p>
                <div class="calendar-grid" id="calendarGrid"></div>
            </section>

            <!-- QUIZ SECTION -->
            <section class="section" id="quiz">
                <h2 class="section-title">‚ùì Knowledge Check: Test Your Understanding</h2>
                <p style="margin-bottom:20px;color:var(--text-muted)">Based on the HBR article "How Inclusive Is Your Leadership?" by Dr. Salwa Rahim-Dillard</p>
                <div id="quizContainer"></div>
                <div id="quizResult" style="display:none"></div>
                <button class="btn btn-primary" id="nextQuestionBtn" onclick="nextQuestion()">Next Question</button>
                <button class="btn btn-gold" id="restartQuizBtn" onclick="startQuiz()" style="display:none">Restart Quiz</button>
            </section>

            <!-- LIFETIME JOURNEY SECTION -->
            <section class="section" id="lifetime">
                <h2 class="section-title">üèÜ Your Lifetime Inclusion Journey</h2>
                <div class="card" style="border-left-color:var(--aaa-blue)">
                    <div class="card-title">üìò PHASE 1: Foundation (Weeks 1-12)</div>
                    <p style="color:var(--text-muted);margin-bottom:10px">Establish baseline, build awareness, start practicing</p>
                    <ul style="margin-left:20px">
                        <li><strong>Weeks 1-4:</strong> Building Awareness - Complete self-assessment, identify priorities, start daily check-ins</li>
                        <li><strong>Weeks 5-8:</strong> Developing Skills - Practice bridging/bonding daily, seek feedback, attend cultural events</li>
                        <li><strong>Weeks 9-12:</strong> Integration - Apply all 10 behaviors consistently, champion DEI initiative, reassess</li>
                    </ul>
                </div>
                <div class="card" style="border-left-color:var(--gold)">
                    <div class="card-title" style="color:var(--gold-dark)">üìó PHASE 2: Deepening (Year 1-2)</div>
                    <p style="color:var(--text-muted);margin-bottom:10px">Refine practice, expand influence, model for others</p>
                    <ul style="margin-left:20px">
                        <li><strong>Q1:</strong> Recommitment - Annual self-assessment, set year goals</li>
                        <li><strong>Q2:</strong> Expansion - Mentor someone different, cross-cultural projects</li>
                        <li><strong>Q3:</strong> Advocacy - Champion systemic change, address inequity at org level</li>
                        <li><strong>Q4:</strong> Legacy - Sponsor diverse talent, build pipeline</li>
                    </ul>
                </div>
                <div class="card" style="border-left-color:var(--green)">
                    <div class="card-title" style="color:var(--green)">üìï PHASE 3: Mastery (Year 3+)</div>
                    <p style="color:var(--text-muted);margin-bottom:10px">Teach others, drive systemic change, create lasting impact</p>
                    <ul style="margin-left:20px">
                        <li><strong>Teaching:</strong> Coach others on inclusive leadership, facilitate training</li>
                        <li><strong>Systemic Change:</strong> Lead DEI initiatives, change policies, influence culture</li>
                        <li><strong>Legacy Building:</strong> Ensure inclusion outlasts your tenure, develop next generation</li>
                    </ul>
                </div>
                <div class="card" style="background:var(--gold);border-left-color:var(--aaa-blue)">
                    <p style="font-weight:700;text-align:center;font-size:1.1em;color:var(--aaa-blue)">
                        "Leaders with high ability to be inclusive must accept that diversity, equity, and inclusion work is never-ending and requires continued growth and efforts."
                        <br><span style="font-weight:400;font-size:0.9em">‚Äî Dr. Salwa Rahim-Dillard, Harvard Business Review</span>
                    </p>
                </div>
            </section>
        </main>
    </div>

    <div class="modal-overlay" id="behaviorModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('behaviorModal')">√ó</button>
            <div id="behaviorModalContent"></div>
        </div>
    </div>

    <div class="offline-indicator" id="offlineIndicator">üì° Offline Mode - Data saved locally</div>

    <script>
const behaviorsData=[
{num:1,name:'Builds Diverse & Inclusive Teams',low:"Creates teams where BIPOC are in similar roles with similar backgrounds",avg:"Partners with talent acquisition to build teams from marginalized groups (60% of openings)",high:"Makes continued efforts with TA and DEI; asks 'Who else is at the table?' then acts on it"},
{num:2,name:'Empowers Voice & Decision-Making',low:"Instructs BIPOC on how to lead; heeds only senior leaders' viewpoints",avg:"Allows BIPOC to make autonomous decisions; seeks advice during crises",high:"Encourages BIPOC to lead with autonomy; validates and amplifies BIPOC voices"},
{num:3,name:'Models Authenticity & Vulnerability',low:"Demonstrates commitment to status quo; only surface-level conversations with BIPOC",avg:"Provides psychological safety until feelings of discomfort emerge",high:"Reveals self and shares vulnerabilities that inspire trust; listens intently to BIPOC perspectives"},
{num:4,name:'Takes Risks Through Courageous Actions',low:"Remains silent when BIPOC are mistreated; maintains low personal risk",avg:"Addresses microaggressions when prompted; speaks up only when risk is low",high:"Speaks truth to power when BIPOC are mistreated; leans into cultural conflicts"},
{num:5,name:'Admits Bias Through Reflection',low:"Denies having biases; maintains preconceived beliefs",avg:"Challenges explicit biases; does not interrogate implicit biases",high:"Challenges unfair assumptions in talent, strategy, and business practices"},
{num:6,name:'Applies Empathy Across Divides',low:"Avoids and remains unaware of cultural differences; operates with stereotypes",avg:"Highlights commonalities to mask differences; creates formal cultural moments 70% of time",high:"Bridges cultural divides with ease; engages in different cultural experiences"},
{num:7,name:'Engages Forthright Discussions',low:"Withholds honest opinions; provides only mandated feedback",avg:"Provides in-the-moment coaching; lacks forward-optimizing feedback",high:"Communicates with candor and honesty; gives and solicits high-quality feedback"},
{num:8,name:'Connects Through Shared Goals',low:"Prefers to work alone; doesn't trust others; creates homogeneous teams",avg:"Works with BIPOC when prompted; creates functional teams",high:"Identifies common goals; includes BIPOC in meetings; builds collaborative networks"},
{num:9,name:'Seeks to Understand the Unfamiliar',low:"Overcautious; refuses to learn about marginalized populations",avg:"Recognizes learning gaps; asks questions to confirm predetermined ideas",high:"Demonstrates strong curiosity; withholds judgment; practices active listening"},
{num:10,name:'Anticipates Resistance & Remains Steadfast',low:"Avoids DEI efforts; withdrawn from Employee Resource Groups",avg:"Participates in DEI primarily when led by senior leaders",high:"Openly articulates moral and business case for DEI; allocates time and resources"}
];

const roleWeeks={
vp:[
{week:1,focus:'Team Composition Audit (Behavior 1)',checkin:'Review current team diversity metrics',action:'Schedule 1:1 with each diverse leader'},
{week:2,focus:'Voice Amplification (Behavior 2)',checkin:"Who haven't I heard from this week?",action:'Invite BIPOC manager to present at leadership meeting'},
{week:3,focus:'Vulnerability Modeling (Behavior 3)',checkin:'What mistake can I share today?',action:'Share personal DEI learning journey publicly'},
{week:4,focus:'Courageous Intervention (Behavior 4)',checkin:'What inequity have I witnessed this week?',action:'Address systemic barrier in hiring/promotion'},
{week:5,focus:'Bias Reflection (Behavior 5)',checkin:'What assumption did I make today?',action:'Share personal bias discovery with team'},
{week:6,focus:'Cultural Bridge Building (Behavior 6)',checkin:'What cultural practice can I learn about?',action:'Attend ERG meeting as participant (not leader)'},
{week:7,focus:'Feedback Forthrightness (Behavior 7)',checkin:'Have I given real feedback this week?',action:'Schedule career discussion with BIPOC leader'},
{week:8,focus:'Goal Alignment (Behavior 8)',checkin:"Whose goals have I helped advance?",action:'Connect BIPOC leader to sponsor'},
{week:9,focus:'Curiosity Practice (Behavior 9)',checkin:"What don't I understand about someone's experience?",action:'Shadow a frontline technician for a day'},
{week:10,focus:'DEI Steadfastness (Behavior 10)',checkin:'What resistance have I encountered?',action:'Address DEI pushback publicly'},
{week:11,focus:'Integration Check (All 10)',checkin:'How are all 10 behaviors showing up?',action:'Meet with each territory director on progress'},
{week:12,focus:'Accountability Review (All 10)',checkin:'What have I committed to and delivered?',action:'Host celebration of inclusion wins'}
],
director:[
{week:1,focus:'Team Assessment (Behavior 1)',checkin:'Map diverse talent on my teams',action:'Have career conversation with each BIPOC manager'},
{week:2,focus:'Decision Empowerment (Behavior 2)',checkin:'What decision can I delegate today?',action:'Let manager lead client presentation'},
{week:3,focus:'Authentic Connection (Behavior 3)',checkin:"Share a challenge you're facing",action:"Share what you've learned from a team member"},
{week:4,focus:'Intervention Practice (Behavior 4)',checkin:'What microaggression might I have missed?',action:'Address problematic pattern immediately'},
{week:5,focus:'Assumption Audit (Behavior 5)',checkin:'What did I assume about someone today?',action:'Adjust rating where bias was identified'},
{week:6,focus:'Cultural Learning (Behavior 6)',checkin:'What holiday/practice can I learn about?',action:'Accommodate cultural schedule request'},
{week:7,focus:'Candid Coaching (Behavior 7)',checkin:"Who needs feedback I haven't given?",action:'Give tough feedback to high performer'},
{week:8,focus:'Collaborative Goals (Behavior 8)',checkin:"Whose goals am I advancing today?",action:'Include diverse voice in planning'},
{week:9,focus:'Deep Curiosity (Behavior 9)',checkin:'What experience am I unfamiliar with?',action:'Spend time with technician team'},
{week:10,focus:'Persistence Check (Behavior 10)',checkin:'What resistance am I facing?',action:'Counsel manager struggling with DEI'},
{week:11,focus:'Behavior Integration (All 10)',checkin:'Which behaviors need more attention?',action:'Get feedback from diverse team members'},
{week:12,focus:'Results Reporting (All 10)',checkin:'What have I achieved this quarter?',action:'Host territory inclusion celebration'}
],
manager:[
{week:1,focus:'Team Inclusion Baseline (Behavior 1)',checkin:'Learn one new thing about each team member',action:'Have lunch with team member from different background'},
{week:2,focus:'Voice Activation (Behavior 2)',checkin:'Ask: What do you think we should do?',action:'Implement idea from quietest team member'},
{week:3,focus:'Personal Sharing (Behavior 3)',checkin:'Share something personal about yourself',action:'Admit a mistake openly to team'},
{week:4,focus:'Speaking Up Practice (Behavior 4)',checkin:'Notice and address any unfair treatment',action:'Interrupt inappropriate comment in the moment'},
{week:5,focus:'Bias Check (Behavior 5)',checkin:'Challenge an assumption you made today',action:'Reassess assignment based on assumption'},
{week:6,focus:'Cultural Curiosity (Behavior 6)',checkin:"Ask about team member's cultural background",action:'Accommodate religious/cultural schedule need'},
{week:7,focus:'Real Feedback (Behavior 7)',checkin:'Give specific, actionable feedback today',action:'Give developmental feedback to strong performer'},
{week:8,focus:'Team Goals (Behavior 8)',checkin:'How can I help you succeed today?',action:'Partner team members for collaboration'},
{week:9,focus:'Understanding Check (Behavior 9)',checkin:"What don't I know about your experience?",action:'Shadow technician on challenging job'},
{week:10,focus:'Consistency Check (Behavior 10)',checkin:'Am I treating everyone fairly?',action:'Address any inconsistent treatment'},
{week:11,focus:'Behavior Review (All 10)',checkin:'How am I doing on inclusion?',action:'Act on feedback received'},
{week:12,focus:'Quarter Reflection (All 10)',checkin:'What did we achieve together?',action:'Host team appreciation moment'}
],
coordinator:[
{week:1,focus:'Scheduling Equity (Behavior 1)',checkin:'Are schedules fair across all technicians?',action:'Adjust scheduling to address inequity'},
{week:2,focus:'Communication Access (Behavior 2)',checkin:'Is everyone receiving information equally?',action:'Add communication method for underserved tech'},
{week:3,focus:'Recognition Practice (Behavior 3)',checkin:"Who haven't I recognized recently?",action:'Recognize technician from different background'},
{week:4,focus:'Issue Escalation (Behavior 4)',checkin:'Am I hearing from all technicians equally?',action:'Create safe channel for underserved voices'},
{week:5,focus:'Development Opportunities (Behavior 5)',checkin:'Are opportunities shared equitably?',action:'Offer opportunity to overlooked technician'},
{week:6,focus:'Cultural Awareness (Behavior 6)',checkin:'What cultural considerations affect scheduling?',action:'Proactively accommodate cultural need'},
{week:7,focus:'Performance Support (Behavior 7)',checkin:'Is support distributed fairly?',action:'Provide extra support to struggling technician'},
{week:8,focus:'Team Coordination (Behavior 8)',checkin:'Are team assignments balanced?',action:'Create diverse technician pairing'},
{week:9,focus:'Listening Session (Behavior 9)',checkin:"What concerns haven't I heard?",action:'Act on concern from listening session'},
{week:10,focus:'Process Fairness (Behavior 10)',checkin:'Are processes fair to everyone?',action:'Adjust process for equity'},
{week:11,focus:'Coordinator Alignment (All 10)',checkin:'Are all coordinators practicing inclusion?',action:'Coach coordinator on inclusion'},
{week:12,focus:'Quarter Review (All 10)',checkin:'What coordination improvements made?',action:'Celebrate coordination wins'}
],
technician:[
{week:1,focus:'Know Your Team (Behavior 1)',checkin:'Learn one thing about a teammate',action:'Have lunch with different teammate'},
{week:2,focus:'Share Your Voice (Behavior 2)',checkin:'Contribute one idea in a meeting',action:'Suggest improvement to process'},
{week:3,focus:'Be Real (Behavior 3)',checkin:"Share a challenge you're working on",action:'Ask for help on something difficult'},
{week:4,focus:'Speak Up (Behavior 4)',checkin:'Notice something unfair, say something',action:'Support teammate facing unfairness'},
{week:5,focus:'Check Assumptions (Behavior 5)',checkin:'Question an assumption you made',action:'Ask clarifying question before judging'},
{week:6,focus:'Cultural Exchange (Behavior 6)',checkin:"Learn about a teammate's culture",action:'Try food/attend event from different culture'},
{week:7,focus:'Give Feedback (Behavior 7)',checkin:'Give helpful feedback to teammate',action:'Offer constructive suggestion respectfully'},
{week:8,focus:'Work Together (Behavior 8)',checkin:'Help a teammate succeed',action:'Partner on challenging job'},
{week:9,focus:'Stay Curious (Behavior 9)',checkin:'Ask question to understand, not judge',action:'Ask teammate about their experience'},
{week:10,focus:'Stay Committed (Behavior 10)',checkin:'Do one thing to support inclusion',action:'Participate in team improvement initiative'},
{week:11,focus:'Reflect & Adjust (All 10)',checkin:'How am I showing up for my team?',action:'Ask teammate for feedback on your inclusion'},
{week:12,focus:'Celebrate Together (All 10)',checkin:'What did we achieve together?',action:'Express gratitude to team'}
]
};

const calendarData=[
{month:'January',theme:'Foundation Building',focus:'Establish diversity baseline (Behaviors 1,3)',behaviors:'1, 3'},
{month:'February',theme:'Black History Month',focus:'Host bridging dialogue; sponsor BIPOC leader (Behaviors 1,2,6)',behaviors:'1, 2, 6'},
{month:'March',theme:'Voice Amplification',focus:'Skip-level forums; act on feedback (Behaviors 2,4,7)',behaviors:'2, 4, 7'},
{month:'April',theme:'Courageous Conversations',focus:'Address systemic barriers (Behaviors 4,7)',behaviors:'4, 7'},
{month:'May',theme:'AAPI Heritage Month',focus:'Attend cultural events; engage with ERGs (Behaviors 6,9)',behaviors:'6, 9'},
{month:'June',theme:'Pride Month',focus:'Champion LGBTQ+ inclusion; review policies (Behaviors 3,6,10)',behaviors:'3, 6, 10'},
{month:'July',theme:'Mid-Year Assessment',focus:'Review H1 metrics; adjust strategy (Behaviors 5,9)',behaviors:'5, 9'},
{month:'August',theme:'Feedback Culture',focus:'Model giving/receiving feedback (Behaviors 5,7)',behaviors:'5, 7'},
{month:'September',theme:'Hispanic Heritage Month',focus:'Engage with community; celebrate (Behaviors 6,9)',behaviors:'6, 9'},
{month:'October',theme:'Collaboration Focus',focus:'Cross-territory projects; break silos (Behaviors 8,9)',behaviors:'8, 9'},
{month:'November',theme:'Native American Heritage',focus:'Connect with Indigenous community (Behaviors 6,9)',behaviors:'6, 9'},
{month:'December',theme:'Reflection & Planning',focus:'Assess year progress; set strategy (Behaviors 10)',behaviors:'10'}
];

const quizQuestions=[
{q:'What is "bridging" in inclusive leadership?',options:['Working remotely','Connecting with people DIFFERENT from you','Building physical bridges','Avoiding conflict'],correct:1,behavior:6},
{q:'What is "bonding" in inclusive leadership?',options:['Team building exercises','Connecting with people SIMILAR to you in marginalized identity','Financial bonds','Performance bonuses'],correct:1,behavior:6},
{q:'According to HBR research, what % of white leaders severely lacked bridging ability?',options:['25%','50%','89%','10%'],correct:2,behavior:6},
{q:'What does "mirroring" indicate about a workplace?',options:['Good reflection practices','Inclusive environment','Non-inclusive environment where BIPOC must change to fit in','Mirror decor'],correct:2,behavior:3},
{q:'What should leaders with HIGH inclusive ability do?',options:['Stop trying','Accept DEI work is never-ending and keep growing','Teach others only','Take a break'],correct:1,behavior:10},
{q:'What is the score range for HIGH ability on the self-assessment?',options:['10-20','21-35','36-50','51-60'],correct:2,behavior:'All'},
{q:'What question should leaders ask to practice Behavior 1?',options:['"Who is in charge?"','"Who else is at the table?"','"What is the budget?"','"When is the deadline?"'],correct:1,behavior:1},
{q:'What characterizes LOW ability in Behavior 4 (Courageous Actions)?',options:['Speaking truth to power','Remaining silent when BIPOC are mistreated','Taking risks','Being authentic'],correct:1,behavior:4}
];

let currentQuestion=0,quizScore=0,session=null,assessmentScores={};

function save(key,data){localStorage.setItem('aaassu_il_'+key,JSON.stringify(data));}
function load(key){const d=localStorage.getItem('aaassu_il_'+key);return d?JSON.parse(d):null;}

function handleLogin(e){
    e.preventDefault();
    const name=document.getElementById('loginName').value;
    const role=document.getElementById('loginRole').value;
    const territory=document.getElementById('loginTerritory').value;
    const roleNames={vp:'VP/National Director',director:'Director Operations',manager:'Manager/Team Lead',training:'Training Director',coord_mgr:'Coordinator Manager',member_coord:'Member Coordinator',pro_coord:'Pro Coordinator',technician:'Technician/Pro'};
    session={name,role,roleName:roleNames[role],territory,loggedIn:true};
    save('session',session);
    showApp(session);
    return false;
}

function showApp(s){
    document.getElementById('loginContainer').style.display='none';
    document.getElementById('appContainer').style.display='block';
    document.getElementById('displayUserName').textContent=s.name;
    document.getElementById('displayUserRole').textContent=s.roleName+' | '+s.territory.charAt(0).toUpperCase()+s.territory.slice(1);
    initApp();
}

function handleLogout(){
    save('session',null);
    location.reload();
}

function showSection(id){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
    const sec=document.getElementById(id);
    if(sec)sec.classList.add('active');
    const tab=document.querySelector(`.nav-tab[data-section="${id}"]`);
    if(tab)tab.classList.add('active');
}

function openModal(id){document.getElementById(id).classList.add('active');}
function closeModal(id){document.getElementById(id).classList.remove('active');}

function renderBehaviors(){
    const html=behaviorsData.map(b=>`
        <div class="behavior-card" onclick="showBehavior(${b.num})">
            <div class="behavior-number">${b.num}</div>
            <div class="behavior-title">${b.name}</div>
            <div class="level-indicators">
                <span class="level-dot red" title="Low Ability"></span>
                <span class="level-dot yellow" title="Average Ability"></span>
                <span class="level-dot green" title="High Ability"></span>
            </div>
        </div>
    `).join('');
    document.getElementById('behaviorsGrid').innerHTML=html;
    document.getElementById('dashboardBehaviors').innerHTML=html;
}

function showBehavior(n){
    const b=behaviorsData.find(x=>x.num===n);
    if(b){
        document.getElementById('behaviorModalContent').innerHTML=`
            <h2 style="color:var(--aaa-blue);margin-bottom:20px;">
                <span style="background:var(--aaa-blue);color:white;padding:8px 16px;border-radius:50%;margin-right:12px;font-size:0.9em;">${b.num}</span>
                ${b.name}
            </h2>
            <div style="padding:15px;background:var(--low-red);border-radius:8px;margin-bottom:15px;border-left:4px solid var(--aaa-red);">
                <strong style="color:var(--aaa-red);">üî¥ LOW ABILITY (Score 1-2)</strong>
                <p style="margin-top:8px">${b.low}</p>
            </div>
            <div style="padding:15px;background:var(--avg-yellow);border-radius:8px;margin-bottom:15px;border-left:4px solid var(--gold);">
                <strong style="color:var(--gold-dark);">üü° AVERAGE ABILITY (Score 3)</strong>
                <p style="margin-top:8px">${b.avg}</p>
            </div>
            <div style="padding:15px;background:var(--high-green);border-radius:8px;border-left:4px solid var(--green);">
                <strong style="color:var(--green);">üü¢ HIGH ABILITY (Score 4-5)</strong>
                <p style="margin-top:8px">${b.high}</p>
            </div>
        `;
        openModal('behaviorModal');
    }
}

function renderRole(r='vp'){
    const w=roleWeeks[r]||roleWeeks.vp;
    document.getElementById('roleContent').innerHTML=`<div class="grid-3">${w.map(x=>`
        <div class="week-card ${x.week<=4?'foundation':x.week<=8?'development':'integration'}">
            <div class="week-number">Week ${x.week}</div>
            <div class="week-focus">${x.focus}</div>
            <div class="week-item"><strong>‚òÄÔ∏è Daily Check-In:</strong> ${x.checkin}</div>
            <div class="week-item"><strong>üåâ Bridging Action:</strong> ${x.action}</div>
        </div>
    `).join('')}</div>`;
}

function renderAssessment(){
    const saved=load('assessment')||{};
    document.getElementById('assessmentBody').innerHTML=behaviorsData.map(b=>`
        <tr>
            <td style="text-align:center;font-weight:700">${b.num}</td>
            <td style="font-weight:600">${b.name}</td>
            <td style="background:var(--low-red);font-size:0.85em">${b.low}</td>
            <td style="background:var(--avg-yellow);font-size:0.85em">${b.avg}</td>
            <td style="background:var(--high-green);font-size:0.85em">${b.high}</td>
            <td><input type="number" class="score-input" id="score${b.num}" min="1" max="5" value="${saved[b.num]||''}" onchange="updateTotal()"></td>
        </tr>
    `).join('');
    updateTotal();
}

function updateTotal(){
    let total=0;
    for(let i=1;i<=10;i++){
        const val=parseInt(document.getElementById('score'+i).value)||0;
        assessmentScores[i]=val;
        total+=val;
    }
    document.getElementById('totalScore').textContent=total;
    updateProgress(total);
}

function updateProgress(score){
    const pct=Math.min(100,Math.round((score/50)*100));
    document.getElementById('overallProgress').style.width=pct+'%';
    let level='Not assessed';
    if(score>=36)level='HIGH ability - Keep growing!';
    else if(score>=21)level='AVERAGE ability - Room for growth';
    else if(score>0)level='LOW ability - Development needed';
    document.getElementById('progressText').textContent=`Score: ${score}/50 - ${level}`;
}

function saveAssessment(){
    save('assessment',assessmentScores);
    alert('‚úÖ Assessment saved! Your scores are stored locally.');
}

function renderCalendar(){
    document.getElementById('calendarGrid').innerHTML=calendarData.map(m=>`
        <div class="calendar-month">
            <div class="calendar-month-header">${m.month}</div>
            <div class="calendar-month-theme">${m.theme}</div>
            <div class="calendar-month-focus">${m.focus}</div>
            <div style="margin-top:8px;font-size:0.8em;color:var(--text-muted)">HBR Behaviors: ${m.behaviors}</div>
        </div>
    `).join('');
}

function startQuiz(){
    currentQuestion=0;quizScore=0;
    document.getElementById('quizResult').style.display='none';
    document.getElementById('nextQuestionBtn').style.display='inline-block';
    document.getElementById('restartQuizBtn').style.display='none';
    renderQuestion();
}

function renderQuestion(){
    if(currentQuestion>=quizQuestions.length){
        endQuiz();return;
    }
    const q=quizQuestions[currentQuestion];
    document.getElementById('quizContainer').innerHTML=`
        <div class="question-card">
            <div style="font-size:0.85em;color:var(--text-muted);margin-bottom:10px">Question ${currentQuestion+1} of ${quizQuestions.length}</div>
            <div class="question-text">${q.q}</div>
            <div class="question-options">
                ${q.options.map((opt,i)=>`<div class="question-option" data-index="${i}" onclick="selectAnswer(${i})">${opt}</div>`).join('')}
            </div>
        </div>
    `;
}

function selectAnswer(i){
    const q=quizQuestions[currentQuestion];
    const opts=document.querySelectorAll('.question-option');
    opts.forEach((o,idx)=>{
        o.classList.remove('selected');
        if(idx===q.correct)o.classList.add('correct');
        else if(idx===i)o.classList.add('incorrect');
        o.onclick=null;
    });
    if(i===q.correct)quizScore++;
}

function nextQuestion(){
    currentQuestion++;
    renderQuestion();
}

function endQuiz(){
    const pct=Math.round((quizScore/quizQuestions.length)*100);
    document.getElementById('quizContainer').innerHTML='';
    document.getElementById('quizResult').style.display='block';
    document.getElementById('quizResult').innerHTML=`<div class="quiz-result" style="background:${pct>=70?'var(--high-green)':'var(--avg-yellow)'}">
        üéØ You scored ${quizScore}/${quizQuestions.length} (${pct}%)
        <p style="font-size:0.9em;font-weight:400;margin-top:10px">${pct>=70?'Great understanding of HBR inclusive leadership principles!':'Review the 10 behaviors and key concepts to improve.'}</p>
    </div>`;
    document.getElementById('nextQuestionBtn').style.display='none';
    document.getElementById('restartQuizBtn').style.display='inline-block';
}

function renderCurrentWeek(){
    const startDate=new Date('2026-01-01');
    const now=new Date();
    const weekNum=Math.min(12,Math.max(1,Math.ceil((now-startDate)/(7*24*60*60*1000))));
    const roleMap={vp:'vp',director:'director',manager:'manager',training:'manager',coord_mgr:'coordinator',member_coord:'coordinator',pro_coord:'coordinator',technician:'technician'};
    const role=roleMap[session?.role]||'vp';
    const week=roleWeeks[role][weekNum-1]||roleWeeks[role][0];
    document.getElementById('currentWeekFocus').innerHTML=`
        <div style="font-weight:700;color:var(--aaa-blue);font-size:1.1em;margin-bottom:10px">Week ${week.week}: ${week.focus}</div>
        <div style="padding:10px;background:var(--surface);border-radius:var(--radius-sm);margin-bottom:8px"><strong>‚òÄÔ∏è Today's Check-In:</strong> ${week.checkin}</div>
        <div style="padding:10px;background:var(--high-green);border-radius:var(--radius-sm)"><strong>üåâ Bridging Action:</strong> ${week.action}</div>
    `;
}

function checkOffline(){
    const ind=document.getElementById('offlineIndicator');
    function u(){ind.classList.toggle('show',!navigator.onLine)}
    window.addEventListener('online',u);
    window.addEventListener('offline',u);
    u();
}

function initApp(){
    renderBehaviors();
    const roleMap={vp:'vp',director:'director',manager:'manager',training:'manager',coord_mgr:'coordinator',member_coord:'coordinator',pro_coord:'coordinator',technician:'technician'};
    renderRole(roleMap[session?.role]||'vp');
    renderAssessment();
    renderCalendar();
    renderCurrentWeek();
    startQuiz();
    
    document.querySelectorAll('.nav-tab').forEach(t=>{
        t.addEventListener('click',()=>showSection(t.dataset.section));
    });
    
    document.querySelectorAll('#roleTabs .tab-btn').forEach(b=>{
        b.addEventListener('click',()=>{
            document.querySelectorAll('#roleTabs .tab-btn').forEach(x=>x.classList.remove('active'));
            b.classList.add('active');
            renderRole(b.dataset.role);
        });
    });
    
    document.querySelectorAll('.modal-overlay').forEach(m=>{
        m.addEventListener('click',(e)=>{if(e.target===m)closeModal(m.id);});
    });
    
    document.addEventListener('keydown',(e)=>{
        if(e.key==='Escape')document.querySelectorAll('.modal-overlay.active').forEach(m=>closeModal(m.id));
    });
    
    checkOffline();
}

window.addEventListener('DOMContentLoaded',()=>{
    const s=load('session');
    if(s&&s.loggedIn)showApp(s);
});

if('serviceWorker' in navigator){
    window.addEventListener('load',()=>{
        const sw=`data:text/javascript;base64,${btoa("self.addEventListener('install',e=>self.skipWaiting());self.addEventListener('activate',e=>e.waitUntil(self.clients.claim()));self.addEventListener('fetch',e=>{e.respondWith(fetch(e.request).catch(()=>new Response('Offline')));});")}`;
        navigator.serviceWorker.register(sw).catch(()=>{});
    });
}
    </script>
</body>
</html>
